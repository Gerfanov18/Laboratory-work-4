name: Data Schema Code Convention Check

on:
  push:
    branches:
      - main
      - laboratory-work-4

jobs:
  check_schema:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Validate JSON data schema
        run: |
          if [ -f "DataSchema.json" ]; then
            echo "üîç Checking JSON schema formatting..."
            python3 -m json.tool DataSchema.json > /dev/null && echo "‚úÖ JSON schema format is valid"
          elif [ -f "DataSchema.sql" ]; then
            echo "üîç Checking SQL schema formatting..."
            grep -E "CREATE|TABLE|INSERT|PRIMARY KEY|FOREIGN KEY" DataSchema.sql && echo "‚úÖ SQL schema contains required statements"
          else
            echo "‚ö†Ô∏è No DataSchema file found (expected DataSchema.json or DataSchema.sql)"
            exit 1
          fi
